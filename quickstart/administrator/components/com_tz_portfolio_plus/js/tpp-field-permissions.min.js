"use strict";!function(e,t,s){if(void 0!==t.sendPermissions){var a=sendPermissions;t.sendPermissions=function(r){var i="not",n=getUrlParam("component"),o=(getUrlParam("extension"),getUrlParam("option")),l=getUrlParam("section"),c=getUrlParam("view"),m=n,d=this.value;if("acl"==c){var u=document.getElementById("icon_"+this.id);u.removeAttribute("class"),u.setAttribute("style","background: url(../media/system/images/modal/spinner.gif); display: inline-block; width: 16px; height: 16px"),i=o+"."+l,m=document.getElementById("jform_title").value;var g=this.id.replace("jform_rules_",""),f=g.lastIndexOf("_"),p={comp:i,action:g.substring(0,f),rule:g.substring(f+1),value:d,title:m};s.removeMessages(),e.ajax({method:"POST",url:document.getElementById("permissions-sliders").getAttribute("data-ajaxuri"),data:p,datatype:"json"}).fail(function(e,a,r){u.removeAttribute("style"),s.renderMessages(s.ajaxErrorsMessages(e,a,r)),t.scrollTo(0,0),u.setAttribute("class","icon-cancel")}).done(function(a){u.removeAttribute("style"),a.data&&1==a.data.result&&(u.setAttribute("class","icon-save"),e(r.target).parents().next("td").find("span").removeClass().addClass(a.data.class).html(a.data.text)),"object"==typeof a.messages&&null!==a.messages&&(s.renderMessages(a.messages),a.data&&1==a.data.result?u.setAttribute("class","icon-save"):u.setAttribute("class","icon-cancel"),t.scrollTo(0,0))})}else a.apply(this,r)}}}(jQuery,window,Joomla),((e,t)=>{e.define("joomla-field-permissions",class extends HTMLElement{constructor(){if(super(),!t)throw new Error("Joomla API is not properly initiated");if(!this.getAttribute("data-uri"))throw new Error("No valid url for validation")}connectedCallback(){const e=[].slice.call(document.querySelectorAll("[data-onchange-task]"));e&&e.forEach(e=>{e.addEventListener("change",e=>{e.preventDefault(),"permissions.apply"==e.target.getAttribute("data-onchange-task")&&this.sendPermissions(e)})})}sendPermissions(e){const s=e.target,a=document.getElementById("icon_"+s.id);a.removeAttribute("class"),a.setAttribute("class","fa fa-spinner fa-spin");let r="not",i=this.getUrlParam("component"),n=this.getUrlParam("extension"),o=this.getUrlParam("option"),l=this.getUrlParam("section"),c=this.getUrlParam("view"),m=i,d=s.value,u="";document.getElementById("jform_context")&&(u=(u=document.getElementById("jform_context").value).split(".")[0]),"com_config"==o&&0==i&&0==n?r="root.1":0==n&&"component"==c?r=i:u?(r="group"==c?u+".fieldgroup."+this.getUrlParam("id"):u+".field."+this.getUrlParam("id"),m=document.getElementById("jform_title").value):0!=n&&0!=c?(r=n+"."+c+"."+this.getUrlParam("id"),m=document.getElementById("jform_title").value):0==n&&0!=c&&(r=o+"."+c+"."+this.getUrlParam("id"),m=document.getElementById("jform_title").value),"acl"==c&&(r=o+"."+l);const g=s.id.replace("jform_rules_",""),f=g.lastIndexOf("_"),p={comp:r,action:g.substring(0,f),rule:g.substring(f+1),value:d,title:m};t.removeMessages(),t.request({url:this.getAttribute("data-uri"),method:"POST",data:JSON.stringify(p),perform:!0,headers:{"Content-Type":"application/json"},onSuccess:(e,r)=>{try{e=JSON.parse(e)}catch(e){console.log(e)}if(a.removeAttribute("class"),e.data&&!0===e.data.result){a.setAttribute("class","fa fa-check");const t=s.parentNode.parentNode.nextElementSibling.querySelector("span");t.removeAttribute("class"),t.setAttribute("class",e.data.class),t.innerHTML=e.data.text}"object"==typeof e.messages&&null!==e.messages&&(t.renderMessages(e.messages),e.data&&!0===e.data.result?a.setAttribute("class","fa fa-check"):a.setAttribute("class","fa fa-times"))},onError:e=>{a.removeAttribute("style"),t.renderMessages(t.ajaxErrorsMessages(jqXHR,textStatus,error)),a.setAttribute("class","fa fa-times")}})}getUrlParam(e){const t=window.location.search.substring(1).split("&");for(let s=0;s<t.length;s+=1){let a=t[s].split("=");if(a[0]==e)return a[1]}return!1}})})(customElements,Joomla);