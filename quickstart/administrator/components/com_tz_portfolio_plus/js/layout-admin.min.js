jQuery(function(t){var e=t.tzLayoutAdmin=function(o,n){t(n);var i=t.extend(!0,e.defaults,o),a=function(){t("#layout-options .row-fluid").each(function(){t(this).find(">.column").find(".columntools > .rowcolumnspop").attr("data-placement","bottom").data("placement","bottom"),t(this).find(">.column").first().find(".columntools > .rowcolumnspop").attr("data-placement","right").data("placement","right"),t(this).find(">.column").last().find(".columntools > .rowcolumnspop").attr("data-placement","left").data("placement","left")})};a();var s=function(e,o){t(e).find(">.widthinput-xs").attr("name",o+"[col-xs]"),t(e).find(">.widthinput-sm").attr("name",o+"[col-sm]"),t(e).find(">.widthinput-md").attr("name",o+"[col-md]"),t(e).find(">.widthinput-lg").attr("name",o+"[col-lg]"),t(e).find(">.offsetinput-xs").attr("name",o+"[col-xs-offset]"),t(e).find(">.offsetinput-sm").attr("name",o+"[col-sm-offset]"),t(e).find(">.offsetinput-md").attr("name",o+"[col-md-offset]"),t(e).find(">.offsetinput-lg").attr("name",o+"[col-lg-offset]"),t(e).find(">.typeinput").attr("name",o+"[type]"),t(e).find(">.positioninput").attr("name",o+"[position]"),t(e).find(">.styleinput").attr("name",o+"[style]"),t(e).find(">.customclassinput").attr("name",o+"[customclass]"),t(e).find(">.responsiveclassinput").attr("name",o+"[responsiveclass]"),t(e).find(">.animationType").attr("name",o+"[animationType]"),t(e).find(">.animationSpeed").attr("name",o+"[animationSpeed]"),t(e).find(">.animationDelay").attr("name",o+"[animationDelay]"),t(e).find(">.animationOffset").attr("name",o+"[animationOffset]"),t(e).find(">.animationEasing").attr("name",o+"[animationEasing]")},r=function(e,o){t(e).find(">div>.rowpropperties .rownameinput").attr("name",o+"[name]"),t(e).find(">div>.rowpropperties .rowcustomclassinput").attr("name",o+"[class]"),t(e).find(">div>.rowpropperties .rowresponsiveinput").attr("name",o+"[responsive]"),t(e).find(">div>.rowpropperties .rowbackgroundcolorinput").attr("name",o+"[backgroundcolor]"),t(e).find(">div>.rowpropperties .rowtextcolorinput").attr("name",o+"[textcolor]"),t(e).find(">div>.rowpropperties .rowlinkcolorinput").attr("name",o+"[linkcolor]"),t(e).find(">div>.rowpropperties .rowlinkhovercolorinput").attr("name",o+"[linkhovercolor]"),t(e).find(">div>.rowpropperties .rowmargininput").attr("name",o+"[margin]"),t(e).find(">div>.rowpropperties .rowpaddinginput").attr("name",o+"[padding]"),t(e).find(">div>.row-container .containertype").attr("name",o+"[containertype]")},p=function(e,o){t(e).find(">.tpp-sortable").each(function(e){var n=o+"[children]["+e+"]";r(this,n),t(this).find("> div >.tpp-sortable >.column").each(function(e){var o=n+"[children]["+e+"]";s(this,o),t(this).find(">.tpp-sortable").length&&p(this,o)}),p(t(this).next(),n)})};t.tzLayoutAdmin.tzTemplateSubmit=function(){t("#content .generator >.layoutmainrow , #element-box .generator >.tpp-sortable").each(function(e){var o=i.fieldName+"["+e+"]";r(this,o),t(this).find("> div >.tpp-sortable >.column").each(function(e){var n=o+"[children]["+e+"]";s(this,n),t(this).find(">.child-row").length?p(this,n):p(t(this).next(),n)})}),t(".toolbox-saveConfig").trigger("click")},jQuery.fn.textOnly,jQuery.fn.textOnly=function(e){return t.trim(t(e).clone().children().remove().end().text())},function(t){t.fn.alterClass=function(e,o){if(-1===e.indexOf("*"))return this.removeClass(e),o?this.addClass(o):this;var n=new RegExp("\\s"+e.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");return this.each(function(e,o){for(var i=" "+o.className+" ";n.test(i);)i=i.replace(n," ");o.className=t.trim(i)}),o?this.addClass(o):this}}(jQuery),jQuery.fn.getClass,jQuery.fn.getClass=function(e){if(e&&"object"==typeof e){var o=t(this).attr("class").split(/\s+/),n=new RegExp(e).exec(o);if(null!=n)return n[n.length-1]}return"boolean"==typeof e?t(this).attr("class").split(/\s+/):""};t("#content").delegate(".columntools > a:not(.accordion-toggle), .row-tools > a:not(.accordion-toggle)","click",function(){return!1});var l=function(){t('a[rel="popover"]').popover({html:!0,sanitize:!1,content:function(){var e=t(this).attr("href"),o=t(this).closest(".column").find("> input.widthinput-lg").val();setTimeout(function(t,e){e.parent().find(".popover #spanwidth select").val(t)},300,o,t(this)),t("#content,#element-box").delegate(".popover select.possiblewidths","change",function(e){e.stopImmediatePropagation();var o=t(this).val();switch(t("button[class*='tz-admin-dv'].active").attr("data-device")){case"xs":t(this).closest(".column").find(">.widthinput-xs").val(o);break;case"sm":t(this).closest(".column").find(">.widthinput-sm").val(o);break;case"md":default:t(this).closest(".column").find(">.widthinput-md").val(o);break;case"lg":t(this).closest(".column").find(">.widthinput-lg").val(o)}t(this).closest(".column").removeClass().addClass("column span"+o+" col-md-"+o)});var n=t(this).closest(".column").find("> input.offsetinput-lg").val();setTimeout(function(t,e){e.parent().find(".popover #spanoffset select").val(t)},300,n,t(this)),t("#content,#element-box").delegate(".popover select.possibleoffsets","change",function(e){e.stopImmediatePropagation();var o=t(this).val(),n=t(this).closest(".column").attr("class").replace(/\boffset\S+/g,"");switch(t(this).closest(".column").attr("class",n).addClass("offset"+o),t("button[class*='tz-admin-dv'].active").attr("data-device")){case"xs":t(this).closest(".column").find(">.offsetinput-xs").val(o);break;case"sm":t(this).closest(".column").find(">.offsetinput-sm").val(o);break;case"md":default:t(this).closest(".column").find(">.offsetinput-md").val(o);break;case"lg":t(this).closest(".column").find(">.offsetinput-lg").val(o)}if("0"==o)switch(t(this).parents(".popover").parent().parent().removeClass("offset0"),t("button[class*='tz-admin-dv'].active").attr("data-device")){case"xs":t(this).closest(".column").find(">.offsetinput-xs").val("");break;case"sm":t(this).closest(".column").find(">.offsetinput-sm").val("");break;case"md":default:t(this).closest(".column").find(">.offsetinput-md").val("");break;case"lg":t(this).closest(".column").find(">.offsetinput-lg").val("")}});var i=t(this).closest(".column").find("> input.typeinput").val();setTimeout(function(t,e){t&&e.parent().find(".popover #includetypes select").val(t)},300,i,t(this)),t("#content,#element-box").delegate(".popover select.includetypes","change",function(e){e.stopImmediatePropagation();var o=t(this).val();t(this).closest(".column").find(">.typeinput").val(o),t(this).closest(".column").removeClass("type-component type-message"),t(this).closest(".column").addClass("type-"+o),t(this).closest(".tab-pane").find("#positions").hide(),t(this).closest(".column").find(">.position-name").text(o.toLowerCase())});var a=t(this).closest(".column").find(".positioninput").val();setTimeout(function(t,e){e.parent().find(".popover #positions select").val(t)},300,a,t(this)),t("#content,#element-box").delegate(".popover select.positions","change",function(e){e.stopImmediatePropagation();var o=t(this).val();""==o&&(o="(none)"),t(this).closest(".column").find(">.positioninput").val(o),t(this).closest(".column").find(">.position-name").text(o)});var s=t(this).closest(".column").find(".customclassinput").val();setTimeout(function(t,e){e.parent().find(".popover #inputcustomclass").val(t)},300,s,t(this)),t("#content,#element-box").delegate(".popover input.customclass","blur",function(e){e.stopImmediatePropagation();var o=t(this).val();t(this).closest(".column").find(">.customclassinput").val(o)}),t("#content,#element-box").delegate(".popover #columnsettings a","click",function(e){var o=t(this).attr("href");""!=o&&"#"!=o&&(t(this).parents("ul").find("li").removeClass("active"),t(this).parent().addClass("active"),t(this).parents("ul").next().find(".active").removeClass("active"),t(".popover "+o).addClass("active"),t(this).parents(".dropdown-menu").parents("li.dropdown").addClass("active"))});var r=t(this).closest(".column").find(".responsiveclassinput").val().split(/\s+/);return t(e).find("#responsive input:checkbox").removeAttr("checked"),t.each(r,function(o,n){t(e).find('#responsive input[value="'+n+'"]').attr("checked",!0)}),t("#content,#element-box").delegate(".popover input:checkbox","click",function(e){e.stopImmediatePropagation();var o=t(this).val(),n=t(this).closest(".column").find(">.responsiveclassinput").val();if(void 0===n&&(n=""),t(this).is(":checked")){var i=n+" "+o;i=(i=t.unique(i.split(/\s+/))).join(" ")}else i=n.replace(o,"");t(this).closest(".column").find(">.responsiveclassinput").val(t.trim(i))}),t(this).closest(".columntools").addClass("open"),t(e).html()},template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><div class="popover-body"><p></p></div></div> <p>   <a class="btn btn-primary sp-popover-apply" onclick="jQuery(this).closest(\'.popover\').prevAll(\'a[rel=popover]\').popover(\'hide\');  jQuery(this).closest(\'.popover\').prevAll(\'a[rel=popover]\').show();"><i class="icon-ok"></i> Apply</a> <a class="btn btn-danger sp-popover-close" onclick="jQuery(this).closest(\'.popover\').prevAll(\'a[rel=popover]\').popover(\'hide\'); jQuery(this).closest(\'.popover\').prevAll(\'a[rel=popover]\').show();"><i class="icon-remove"></i> Close</a>   </p> </div></div>'}).click(function(){return t(this).show(),!1}),t("#layout-options").delegate(".popover .sp-popover-apply, .popover .sp-popover-close","click",function(e){t(this).closest(".columntools").removeClass("open"),t("#columnsettings").find("li").first().addClass("active")}),t('a[rel="rowpopover"]').popover({html:!0,sanitize:!1,placement:"left",content:function(){var e=t(this).attr("href"),o=t(this).parent().prev().find(">span.rowdocs>.rownameinput");setTimeout(function(t,e){t.parent().find(">.popover .rowname").val(e)},300,t(this),o.val()),t("#content,#element-box").delegate(".popover input.rowname","blur",function(e){e.stopImmediatePropagation();var o=t(this).val();t(this).parents(".popover").parent().prev().find(">span.rowdocs>.rownameinput").val(o),t(this).parents(".popover").parent().prev().find(">.rowname").text(o)});var n=t(this).parent().prev().find(">span.rowdocs>.rowbackgroundcolorinput");setTimeout(function(e,o){e.parent().find(">.popover .rowbackgroundcolor").val(o),e.parent().find(">.popover .rowbackgroundcolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(e){var o=e.toRgbString();t(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowbackgroundcolorinput").val(o)}})},300,t(this),n.val());var i=t(this).parent().prev().find(">span.rowdocs>.rowtextcolorinput");setTimeout(function(e,o){e.parent().find(">.popover .rowtextcolor").val(o),e.parent().find(">.popover .rowtextcolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(e){var o=e.toRgbString();t(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowtextcolorinput").val(o)}})},300,t(this),i.val());var a=t(this).parent().prev().find(">span.rowdocs>.rowlinkcolorinput");setTimeout(function(e,o){e.parent().find(">.popover .rowlinkcolor").val(o),e.parent().find(">.popover .rowlinkcolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(e){var o=e.toRgbString();t(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowlinkcolorinput").val(o)}})},300,t(this),a.val());var s=t(this).parent().prev().find(">span.rowdocs>.rowlinkhovercolorinput");setTimeout(function(e,o){e.parent().find(">.popover .rowlinkhovercolor").val(o),e.parent().find(">.popover .rowlinkhovercolor").spectrum({flat:!1,showInput:!0,preferredFormat:"rgb",showButtons:!0,showAlpha:!0,showPalette:!0,clickoutFiresChange:!0,cancelText:"cancel",chooseText:"Choose",palette:[["rgba(255, 255, 255, 0)"]],change:function(e){var o=e.toRgbString();t(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowlinkhovercolorinput").val(o)}})},300,t(this),s.val());var r=t(this).parent().prev().find(">span.rowdocs>.rowmargininput");setTimeout(function(t,e){t.parent().find(">.popover .rowmargin").val(e)},300,t(this),r.val()),t("#content,#element-box").delegate(".popover input.rowmargin","blur",function(e){e.stopImmediatePropagation();var o=t(this).val();t(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowmargininput").val(o)});var p=t(this).parent().prev().find(">span.rowdocs>.rowpaddinginput");setTimeout(function(t,e){t.parent().find(">.popover .rowpadding").val(e)},300,t(this),p.val()),t("#content,#element-box").delegate(".popover input.rowpadding","blur",function(e){e.stopImmediatePropagation();var o=t(this).val();t(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowpaddinginput").val(o)});var l=t(this).parent().prev().find(">span.rowdocs>.rowcustomclassinput");setTimeout(function(t,e){t.parent().find(">.popover .rowcustomclass").val(e)},300,t(this),l.val()),t("#content,#element-box").delegate(".popover input.rowcustomclass","blur",function(e){e.stopImmediatePropagation();var o=t(this).val();t(this).parents(".popover").parent().prev().find(">span.rowdocs>.rowcustomclassinput").val(o)});var c=t(this).parent().prev().find(">span.rowdocs>.rowresponsiveinput").val().split(/\s+/);return t(e).find("#rowresponsiveinputs input:checkbox").removeAttr("checked"),t.each(c,function(o,n){t(e).find('#rowresponsiveinputs input[value="'+n+'"]').attr("checked",!0)}),t("#content,#element-box").delegate(".popover input:checkbox","click",function(e){e.stopImmediatePropagation();var o=t(this).val(),n=t(this).parents(".popover").parent().prev().find("span.rowdocs>.rowresponsiveinput").val();if(void 0===n&&(n=""),t(this).is(":checked")){var i=n+" "+o;i=(i=t.unique(i.split(/\s+/))).join(" ")}else i=n.replace(o,"");t(this).parents(".popover").parent().prev().find("span.rowdocs>input.rowresponsiveinput").val(t.trim(i))}),t(e).html()},template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><div class="popover-body"><p></p></div></div><a class="btn btn-primary d-inline-block" onclick="jQuery(this).closest(\'.popover\').prevAll(\'a[rel=rowpopover]\').popover(\'hide\'); jQuery(this).closest(\'.popover\').prevAll(\'a[rel=rowpopover]\').show(); "><i class="icon-ok"></i> Apply</a></div></div>'}).click(function(){return t(this).show(),!1})};l(),t("#content,#element-box").delegate("a.rowdelete","click",function(){return confirm("Are you sure to delete this row?")&&t(this).parent().parent().parent().slideUp("slow",function(){t(this).remove()}),!1}),t("#content,#element-box").delegate("a.columndelete","click",function(){if(confirm("Are you sure to delete this column?")){$parent2=t(this).parent().parent().parent(),t(this).parent().parent().fadeOut("fast").remove();$parent2.find(">.column").length}return!1});var c=function(){t("div.tpp-sortable").sortable({forcePlaceholderSize:!0,axis:"x,y",items:">div.column",tolerance:"pointer",handle:".columnmove",containment:"parent",placeholder:"tz-state-highlight column",start:function(t,e){e.placeholder.width(e.item.width())},update:function(e,o){setTimeout(function(){i.j4Compare?t('a[rel="popover"]').popover("dispose"):t('a[rel="popover"]').popover("destroy"),t('a[rel="popover"]').show(),a(),l()},300)}}),t(".generator").sortable({axis:"y",forcePlaceholderSize:!0,containment:"parent",handle:".rowmove",placeholder:"tz-state-highlight-row",items:">div.tpp-sortable"}),t(".generator").sortable("refreshPositions"),t(".generator > .tpp-sortable .tpp-sortable .column").sortable({axis:"y",forcePlaceholderSize:!0,handle:".row-move-in-column",placeholder:"tz-state-highlight",items:".child-row"})};c(),t("#content,#element-box").delegate("a.add-row","click",function(){var e=t(this);return t.get("index.php?option=com_tz_portfolio_plus&view=template_style&layout=new-row&format=tpl&time="+t.now(),function(o){t(o).hide().insertAfter(e.closest(".tpp-sortable")).slideDown("slow"),i.j4Compare?t('a[rel="popover"]').popover("dispose"):t('a[rel="popover"]').popover("destroy"),t('a[rel="popover"]').show(),a(),l()}),!1}),t("#content,#element-box").delegate("a.columnmove, a.icon-asterisk","click",function(){return!1});t("#content,#element-box").delegate("a.add-column","click",function(){var e;t(this).parent().next().next().find(">.column").length;return e=t(this).parent().next().next(),t.get("index.php?option=com_tz_portfolio_plus&view=template_style&layout=new-column&format=tpl",function(o){t(o).hide().appendTo(e).fadeIn(1e3),c(),i.j4Compare?t('a[rel="popover"]').popover("dispose"):t('a[rel="popover"]').popover("destroy"),t('a[rel="popover"]').show(),a(),l()}),i.j4Compare?t('a[rel="popover"]').popover("dispose"):t('a[rel="popover"]').popover("destroy"),t('a[rel="popover"]').show(),a(),l(),!1});t("#content,#element-box").delegate("a.add-rowin-column","click",function(){var e=t(this);return t.get("index.php?option=com_tz_portfolio_plus&view=template_style&layout=new-row&format=tpl&rowincolumn=true",function(o){t(o).hide().appendTo(e.closest(".column")).slideDown("slow"),i.j4Compare?t('a[rel="popover"]').popover("dispose"):t('a[rel="popover"]').popover("destroy"),t('a[rel="popover"]').show(),a(),l()}),!1})};t.extend(t.tzLayoutAdmin,{defaults:{basePath:"",pluginPath:"",token:"",j4Compare:!1,fieldName:"jform[attrib]"},tzTemplateSubmit:function(){}}),t.fn.tzLayoutAdmin=function(e){if(void 0===e&&(e={}),"object"==typeof e)return new t.tzLayoutAdmin(e,this)};var o=new Array;o.lg="md",o.md="sm",o.sm="xs";var n=function(e){t("#plazart_layout_builder .generator .column").each(function(n,i){for(var a=t(this).find(".widthinput-"+e).val(),s=t(this).find(".offsetinput-"+e).val(),r=e;""==a;)"xs"==r?a="12":(r=o[r],a=t(this).find(".widthinput-"+r).val());s=""!=s?" offset"+s:"",t(this).removeClass().addClass("ui-sortable column span"+a+s)})};t(document).ready(function(){t("button[class*='tz-admin-dv']").click(function(){switch(t("button[class*='tz-admin-dv']").removeClass("active"),t(this).addClass("active"),t(this).attr("data-device")){case"xs":t("#plazart_layout_builder .generator").css("width",450),n("xs");break;case"sm":t("#plazart_layout_builder .generator").css("width",650),n("sm");break;case"md":t("#plazart_layout_builder .generator").css("width",800),n("md");break;case"lg":default:t("#plazart_layout_builder .generator").css("width",950),n("lg")}}),t("button[class*='tz-admin-dv']").hover(function(){"undefined"!=typeof tooltip&&t(this).tooltip("show")})})});